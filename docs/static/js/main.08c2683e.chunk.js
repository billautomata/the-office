(this["webpackJsonpthe-office-visualizations-redux"]=this["webpackJsonpthe-office-visualizations-redux"]||[]).push([[0],{163:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(8),s=n.n(i),o=(n(163),n(9)),c=n(68);function l(e){for(var t=["?",".",",","!","-"],n=e.filter((function(e){return"TRUE"!==e.deleted})),r=0;r<n.length;r++)n[r].id=String(r);return n.forEach((function(e){e.search_text=e.line_text.replace(RegExp("\\[.*?\\]"),""),t.forEach((function(t,n){e.search_text=e.search_text.replaceAll(t," ")})),e.search_text=e.search_text.split(" ").filter((function(e){return e.length>0})).join(" ")})),n}var d=n(12);function u(e){var t=1024,n=172,r=e.reduce((function(e,t){return void 0===e[t.speaker]&&(e[t.speaker]={name:t.speaker,value:0,seasonEpisodes:[]}),e[t.speaker].value+=1,e[t.speaker].seasonEpisodes.push({season:t.season,episode:t.episode}),e}),{});return d.g().tile(d.h.ratio(2)).size([t,n]).padding(1).round(!0)(d.c({name:"",children:Object.values(r)}).sum((function(e){return e.value})).sort((function(e,t){return t.value-e.value}))).leaves()}function h(e){var t={};return e.forEach((function(e){void 0===t[e.Season]&&(t[e.Season]={episodes:[]}),void 0===t[e.Season].episodeCount&&(t[e.Season].episodeCount=0),t[e.Season].episodeCount+=1})),Object.values(t).forEach((function(e){for(var t=0;t<e.episodeCount;t++)e.episodes.push(0)})),{seasons:f(t)}}function f(e){var t=[];return Object.values(e).forEach((function(e,n){t.push(e)})),t}function p(e,t,n){var r={seasons:[]};return r.seasons=e.seasons.map((function(e){var t={episodes:[]};return t.episodeCount=e.episodeCount,e.episodes.forEach((function(e){t.episodes.push(0)})),t})),t.forEach((function(e){null!==n&&n!==e.speaker||(r.seasons[Number(e.season)-1].episodes[Number(e.episode)-1]+=1)})),r}var x="ADD_LINES",b="ADD_SERIES",j="CHARACTER_FILTER",m="EXPAND_ALL_LINES",g="EXPAND_LINE",y="FIND_MATCHES",O="FINISH_LOADING",v="SET_QUOTE",C={bubbleData:{seasons:[]},expandedMatches:[],filteredCharacter:null,finishedLoading:!1,lines:[],matches:[],series:[],treemapLeaves:[],quote:"that's what she said"};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var n=l(t.payload);return Object.assign({},e,{lines:n});case b:var r=h(t.payload);return Object.assign({},e,{series:t.payload,bubbleData:r});case j:var a=p(e.bubbleData,e.matches,t.payload);return Object.assign({},e,{filteredCharacter:t.payload,bubbleData:a});case m:var i;return i=!0===t.payload?e.matches.map((function(e,t){return t})):[],Object.assign({},e,{expandedMatches:i});case g:var s=e.expandedMatches.filter((function(e){return!0}));return-1!==s.indexOf(t.payload)?s=s.filter((function(e){return e!==t.payload})):s.push(t.payload),Object.assign({},e,{expandedMatches:s});case y:var o=e.lines.filter((function(t){return 1===e.quote.toLowerCase().trim().split(" ").length?-1!==t.search_text.toLowerCase().split(" ").indexOf(e.quote.toLowerCase().trim()):-1!==t.search_text.toLowerCase().indexOf(e.quote.toLowerCase().trim())})),c=p(e.bubbleData,o,null),d=u(o);return Object.assign({},e,{matches:o,bubbleData:c,expandedMatches:[],treemapLeaves:d,filteredCharacter:null});case O:return Object.assign({},e,{finishedLoading:!0});case v:return Object.assign({},e,{quote:t.payload.quote});default:return e}},F=Object(c.a)(w);function k(e){return{type:y,payload:e}}var A=n.p+"static/media/the-office-lines-scripts.ec62a81b.csv",_=n.p+"static/media/the-office-series.4be06bee.csv",S=n(200),E=n(2);var L=Object(o.b)((function(e,t){return{bubbleData:e.bubbleData}}),(function(e){return{}}))((function(e){var t=e.bubbleData;return Object(E.jsx)(S.a,{item:!0,xs:12,children:Object(E.jsxs)("svg",{style:{width:1024,height:410,userSelect:"none"},children:[Object(E.jsx)("g",{transform:"translate(0 30)",children:Object.values(t.seasons).map((function(e,t){return Object(E.jsxs)("g",{transform:"translate(0 ".concat(40*t,")"),children:[Object(E.jsxs)("text",{x:"100",y:"0",dy:"0.33em",fontSize:"14",fontWeight:"700",letterSpacing:".5px",fill:"#777",textAnchor:"end",children:["Season ",t+1]}),Object(E.jsx)("line",{x1:"125",y1:"0",x2:35*e.episodes.length+90,y2:"0",stroke:"#AAA",strokeWidth:"1"}),Object(E.jsx)("g",{transform:"translate(100 0)",children:e.episodes.map((function(e,n){return Object(E.jsxs)("g",{"data-testid":"bc-".concat(t,"-").concat(n),transform:"translate(".concat(35*n+25," 0)"),style:{cursor:e>0?"pointer":null},onClick:function(){if(e>0){var r=document.getElementById("quote_".concat(t+1,"_").concat(n+1));if(null===r)return;window.scrollTo({top:r.offsetTop,behavior:"smooth"})}},children:[Object(E.jsx)("circle",{cx:"0",cy:"0",r:"15",fill:0===e?"white":"#a6cee3",stroke:0===e?"#AAA":"none"}),Object(E.jsx)("text",{x:"0",y:"0",fill:0===e?"white":"#333",fontWeight:"700",fontSize:"12",textAnchor:"middle",dy:"0.33em",children:e})]},"bubble_season_".concat(t,"_episode_").concat(n))}))})]},"bubble_season_".concat(t))}))}),Object(E.jsxs)("g",{transform:"translate(0 385)",children:[Object(E.jsx)("text",{x:"100",fill:"#AAA",y:"0",dy:"0.33em",fontSize:"10",letterSpacing:"1px",fontWeight:"600",textAnchor:"end",children:"EPISODE"}),Object(E.jsx)("line",{x1:"125",y1:"0",x2:1e3,y2:"0",stroke:"#CCC",strokeWidth:"1"}),new Array(26).fill(0).map((function(e,t){return Object(E.jsxs)("g",{transform:"translate(".concat(125+35*t," 0)"),children:[Object(E.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"white",stroke:"#CCC"}),Object(E.jsx)("text",{fill:"#AAA",dy:".33em",fontSize:"10",textAnchor:"middle",children:t+1})]},"bubbles_legend_episode_".concat(t))}))]})]})})}));function D(e){return Object(E.jsxs)(S.a,{container:!0,item:!0,style:{padding:"12px 32px",textAlign:"left",lineHeight:"1.33em"},children:[Object(E.jsxs)(S.a,{item:!0,children:["This application lets you search every line from the NBC television show ",Object(E.jsx)("a",{style:{color:"steelblue"},href:"https://en.wikipedia.org/wiki/The_Office_(American_TV_series)",children:"The Office"}),", and visualizes the results to give you insight as to which episode the quote appears, who said the quote, when they said the quote, how many times they said the quote, and the context of the quote."]}),Object(E.jsx)(S.a,{item:!0,style:{width:640},xs:12,children:Object(E.jsxs)("ul",{children:[Object(E.jsxs)("li",{children:["Type word or phrase in the search box, and press the ",Object(E.jsx)("b",{children:"Enter"})," key to search."]}),Object(E.jsx)("li",{children:"There is a graph of the character who said the quote, and how many times they say the quote."}),Object(E.jsxs)("li",{style:{marginLeft:0},children:[Object(E.jsx)("b",{children:"Click"})," the box for the character to filter for only their lines."]}),Object(E.jsx)("li",{children:"The seasons and episodes are plotted beneath the character chart, and the episode contains the number of lines the word or phrase appears."}),Object(E.jsxs)("li",{style:{marginLeft:0},children:[Object(E.jsx)("b",{children:"Click"})," the episode bubble to view the matching lines from that episode."]}),Object(E.jsx)("li",{children:"Beneath the graphs is the list of lines that contain the quote."}),Object(E.jsxs)("li",{style:{marginLeft:0},children:[Object(E.jsx)("b",{children:"Click"}),' "more" to see the lines immediately before and after the line with your search terms.']})]})})]})}var q=Object(o.b)((function(e,t){return{resultsFound:null!==e.filteredCharacter?e.matches.filter((function(t){return t.speaker===e.filteredCharacter})).length:e.matches.length}}),(function(e){return{}}))((function(e){return Object(E.jsxs)(S.a,{item:!0,container:!0,xs:12,justifyContent:"flex-end",children:[Object(E.jsx)("span",{style:{fontWeight:700,marginRight:4},children:e.resultsFound})," result",1===e.resultsFound?"":"s"," found"]})}));var M=Object(o.b)((function(e,t){return{lines:e.lines,matches:e.matches,expandedMatches:e.expandedMatches,filteredCharacter:e.filteredCharacter,series:e.series}}),(function(e){return{expandAllLines:function(t){return e(function(e){return{type:m,payload:e}}(t))},expandLine:function(t){return e(function(e){return{type:g,payload:e}}(t))}}}))((function(e){return Object(E.jsxs)(S.a,{item:!0,container:!0,style:{width:1024,margin:"auto",letterSpacing:.5},children:[Object(E.jsx)(q,{}),Object(E.jsxs)(S.a,{item:!0,container:!0,"data-testid":"matches",xs:12,children:[Object(E.jsxs)(S.a,{item:!0,container:!0,xs:12,alignItems:"center",style:{padding:12,textAlign:"center",marginBottom:2,fontWeight:600,letterSpacing:1},children:[Object(E.jsx)(S.a,{item:!0,xs:1,style:{textDecoration:"underline"},children:"Season"}),Object(E.jsx)(S.a,{item:!0,xs:2,style:{textDecoration:"underline"},children:"Episode"}),Object(E.jsx)(S.a,{item:!0,xs:2,style:{textDecoration:"underline"},children:"Speaker"}),Object(E.jsx)(S.a,{item:!0,xs:6,style:{textAlign:"left",textDecoration:"underline"},children:"Line"}),Object(E.jsx)(S.a,{item:!0,xs:1,style:{cursor:"pointer",color:"steelblue",fontSize:10,fontWeight:500,textAlign:"right",textDecoration:"none !important"},onClick:function(){e.expandedMatches.length===e.matches.length?e.expandAllLines(!1):e.expandAllLines(!0)},children:e.expandedMatches.length===e.matches.length?"collapse all":"expand all"})]}),e.matches.filter((function(t){return null===e.filteredCharacter||e.filteredCharacter===t.speaker})).map((function(t,n){var r=-1!==e.expandedMatches.indexOf(n);return Object(E.jsxs)(S.a,{"data-testid":"matches_".concat(t.id),id:"quote_".concat(t.season,"_").concat(t.episode),item:!0,container:!0,xs:12,alignItems:"flex-start",style:{borderRadius:4,backgroundColor:n%2===0?"#FFFFFF":"#F3F3F3",padding:12,textAlign:"center",marginBottom:0},children:[Object(E.jsx)(S.a,{item:!0,xs:1,children:t.season}),Object(E.jsx)(S.a,{item:!0,xs:2,children:e.series.filter((function(e){return Number(e.Season)===Number(t.season)}))[Number(t.episode)-1].EpisodeTitle}),Object(E.jsx)(S.a,{item:!0,xs:2,children:t.speaker}),Object(E.jsxs)(S.a,{item:!0,xs:6,style:{textAlign:"left"},children:[function(){if(!0===r){var n=e.lines.filter((function(e){return Number(e.id)===Number(t.id)-1}))[0];return void 0===n?Object(E.jsx)(E.Fragment,{}):Object(E.jsxs)("div",{style:{padding:"0px 0px 12px 0px"},children:[Object(E.jsx)("b",{children:n.speaker})," ",n.line_text]})}}(),Object(E.jsx)("b",{children:!0===r?t.speaker+" ":""}),t.line_text,function(){if(!0===r){var n=e.lines.filter((function(e){return Number(e.id)===Number(t.id)+1}))[0];return void 0===n?Object(E.jsx)(E.Fragment,{}):Object(E.jsxs)("div",{style:{padding:"12px 0px 0px 0px"},children:[Object(E.jsx)("b",{children:n.speaker})," ",n.line_text]})}}()]}),Object(E.jsx)(S.a,{item:!0,xs:1,style:{cursor:"pointer",color:"steelblue",fontSize:10,textAlign:"right"},onClick:function(){e.expandLine(n)},children:!0===r?"less":"more"})]},"match_".concat(t.id))}))]})]})})),T=n.p+"static/media/the-office.b100c584.svg",N=n(205);var z=Object(o.b)((function(e,t){return{quote:e.quote}}),(function(e){return{findMatches:function(t){return e(k(t))},setQuote:function(t){return e(function(e){return{type:v,payload:e}}(t))}}}))((function(e){return Object(E.jsx)(S.a,{item:!0,xs:12,children:Object(E.jsx)(N.a,{label:"Quote",variant:"outlined",defaultValue:e.quote,style:{width:768,marginBottom:14},onChange:function(t){e.setQuote({quote:t.nativeEvent.target.value})},onKeyUp:function(t){"Enter"!==t.nativeEvent.code&&"NumpadEnter"!==t.nativeEvent.code||e.findMatches({})}})})}));var I=Object(o.b)((function(e){return{treemapLeaves:e.treemapLeaves,filteredCharacter:e.filteredCharacter}}),(function(e){return{setFilteredCharacter:function(t){e(function(e){return{type:j,payload:e}}(t))}}}))((function(e){var t=e.treemapLeaves,n=e.filteredCharacter,r=e.setFilteredCharacter;return Object(E.jsx)(S.a,{item:!0,xs:12,style:{marginBottom:0},children:Object(E.jsx)("div",{style:{position:"relative",height:172,width:1024,margin:"auto"},children:t.map((function(e,t){return Object(E.jsx)("div",{style:{position:"absolute",top:e.y0,left:e.x0,width:e.x1-e.x0,height:e.y1-e.y0,textAlign:"left",boxSizing:"border-box",backgroundColor:"#a6cee3",overflow:"hidden",color:"#333",borderRadius:"4px",userSelect:"none",cursor:"pointer",border:n===e.data.name?"1px solid #333":"1px solid transparent"},onClick:function(){null===n||n!==e.data.name?r(e.data.name):r(null)},children:Object(E.jsxs)("div",{style:{display:"inline-block",position:"absolute",top:"3px",left:"5px",fontSize:12,fontWeight:600},children:[e.data.name," ",Object(E.jsxs)("span",{style:{fontWeight:300,fontSize:12},children:["(",e.data.value,")"]})]})},"treemap_leaf_".concat(t))}))})})})),W=n.p+"static/media/blind-guy-mcsqueezy.a07a56ae.jpeg",B=n(38),R=n(15),U=n(65),P=n(69),G=function(e){Object(U.a)(n,e);var t=Object(P.a)(n);function n(e){var r;return Object(B.a)(this,n),(r=t.call(this,e)).state={},r.svgRef=a.a.createRef(),r.componentWillUnmountFlag=!1,r}return Object(R.a)(n,[{key:"componentDidMount",value:function(){var e=512,t=512,n=48,r=d.b,a=d.f(this.svgRef.current).attr("viewBox",[0,0,e,t].join(" ")).attr("width","100%").attr("margin","auto").style("background-color","#000"),i=a.append("defs"),s=i.append("linearGradient").attr("id","text-color-gradient");s.append("stop").attr("stop-color","#FFF").attr("offset","0%").attr("stop-opacity","0%"),s.append("stop").attr("stop-color","#FFF").attr("offset","50%").attr("stop-opacity","100%"),s.append("stop").attr("stop-color","#FFF").attr("offset","100%").attr("stop-opacity","0%"),i.append("filter").attr("id","filter-shadow-maze-text").append("feDropShadow").attr("dx",0).attr("dy",0).attr("stdDeviation",10).attr("flood-color","#777");i.append("clipPath").attr("id","clip-mask-circle-bg").append("circle").attr("cx",.5*e).attr("cy",.5*t).attr("r",.48*e).attr("fill","#000");var o=d.e().domain([0,n]).range([0,e]),c=o(.5),l=a.append("g").attr("transform","translate(".concat(c," ").concat(c,")")),u=a.append("g").attr("transform","translate(".concat(.5*e," ").concat(.444*t,")")).attr("filter","url(#filter-shadow-maze-text)"),h=.2*e;u.append("text").text("LOADING").attr("x",0).attr("y",0).attr("dy","-.1em").attr("font-size",h).attr("fill","#FFF").attr("font-weight",700).attr("text-anchor","middle"),u.append("text").text("DATA").attr("x",0).attr("y",0).attr("dy",".68em").attr("font-size",1.97*h).attr("fill","#FFF").attr("font-weight",700).attr("letter-spacing",-20).attr("text-anchor","middle");var f=[],p={};d.d(n).forEach((function(t){d.d(n).forEach((function(r){var a={x:o(t),y:o(r)},i=l.append("g").attr("transform","translate(".concat(a.x," ").concat(a.y,")")).append("line").datum({x:t,y:r}).attr("transform",Math.random()>.5?"rotate(45)":"rotate(-45)").attr("x1",0).attr("y1",1.4*-c).attr("x2",0).attr("y2",1.4*c).attr("stroke","#FFF").attr("stroke-width",e/n*.5).attr("stroke-linecap","round");void 0===p[t-24]&&(p[t-24]={}),p[t-24][r-24]=i,f.push(i)}))}));var x=this;!function t(){x.componentWillUnmountFlag||f.forEach((function(a){var i=a.datum(),s=Math.sqrt(Math.pow(24-i.x,2)+Math.pow(24-i.y,2));a.transition().delay((function(e){return 31.25*s})).duration(1).attr("stroke","#FFF").attr("stroke-width",e/n*.5*.25).transition().delay(0).duration(1500).ease(r).attr("transform",Math.random()>.5?"rotate(45)":"rotate(-45)").attr("stroke","#a6cee3").attr("stroke-width",e/n*.5).on("end",(function(e){47===e.x&&47===e.y&&t()}))}))}()}},{key:"componentWillUnmount",value:function(){this.componentWillUnmountFlag=!0}},{key:"render",value:function(){return Object(E.jsx)("div",{style:{textAlign:"center"},children:Object(E.jsx)("svg",{ref:this.svgRef})})}}]),n}(a.a.Component);var H=Object(o.b)((function(e,t){return{finishedLoading:e.finishedLoading,lines:e.lines,matches:e.matches,series:e.series}}),(function(e){return{}}))((function(e){return Object(E.jsxs)(S.a,{container:!0,style:{textAlign:"center",marginBottom:1024,marginTop:16},children:[Object(E.jsx)(S.a,{item:!0,xs:12,children:Object(E.jsx)("img",{src:T,style:{width:820,margin:"auto"},alt:"logo for the television series: the office"})}),!1===e.finishedLoading?Object(E.jsx)(S.a,{item:!0,xs:6,style:{margin:"auto",marginTop:12},children:Object(E.jsx)(G,{})}):Object(E.jsxs)(S.a,{container:!0,item:!0,xs:12,children:[Object(E.jsxs)(S.a,{container:!0,item:!0,justifyContent:"center",style:{margin:"auto",width:820},children:[Object(E.jsx)(D,{}),Object(E.jsx)(z,{})]}),Object(E.jsxs)(S.a,{container:!0,item:!0,xs:12,style:{display:0===e.matches.length?null:"none"},children:[Object(E.jsx)(S.a,{item:!0,xs:12,style:{marginBottom:24},children:"No results found.  Try another search term."}),Object(E.jsx)(S.a,{item:!0,xs:12,children:Object(E.jsx)("img",{src:W,alt:"Michael Scott`s improv character Blind Guy McSqueezy"})})]}),Object(E.jsxs)(S.a,{container:!0,item:!0,xs:12,style:{display:0===e.matches.length?"none":null},children:[Object(E.jsx)(I,{}),Object(E.jsx)(L,{}),Object(E.jsx)(M,{})]})]})]})}));var Q=Object(o.b)((function(e,t){return{}}),(function(e){return{addLines:function(t){return e(function(e){return{type:x,payload:e}}(t))},addSeries:function(t){return e(function(e){return{type:b,payload:e}}(t))},finishLoading:function(t){return e(function(e){return{type:O,payload:e}}(t))},findMatches:function(t){return e(k(t))}}}))((function(e){var t=e.addLines,n=e.addSeries,r=e.findMatches,a=e.finishLoading;return Object(d.a)(A).then((function(e){t(e),Object(d.a)(_).then((function(e){n(e),r(),a()}))})),Object(E.jsx)(H,{})}));var J=function(){return Object(E.jsx)(o.a,{store:F,children:Object(E.jsx)(Q,{})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};s.a.render(Object(E.jsx)(J,{}),document.getElementById("root")),V()}},[[172,1,2]]]);
//# sourceMappingURL=main.08c2683e.chunk.js.map